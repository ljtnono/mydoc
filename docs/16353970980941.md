# k8s核心组件与架构

## Kubernets 概述

* Kubernets 是什么

  Kubernets的名字来自希腊语，意思是舵手或领航员.k8s是将k和s之间的8个字符ubernete替换为8的缩写

  k8s的创造者，是众人皆知的行业巨头--Google

  K8s并不是一件全新的发明，他是Google10多年大规模容器管理技术Borg的开源版

  2014年6月k8s由Google公司正式公布出来并宣布开源

* K8s是做什么用的？

  就在Docker容器技术被吵得热火朝天之时，大家发现，如果想要将Docker应用于具体的业务实现，是存在困难的--编排、管理和调度等各个方面，都不容易。于是，人们迫切需要一套管理系统，对Docker及容器进行更高级更灵活的管理，就在这个时候，k8s出现了

  k8s是容器集群管理系统，是一个开源的平台，可以实现容器集群的自动化部署、自动扩缩容、维护等工鞥

* k8s适用场景

  - 有大量跨主机的容器需要管理
  - 快速部署应用
  - 快速扩展应用
  - 无缝对接新的应用功能
  - 节省资源，优化硬件资源的使用

## Kubernets 架构

* master（管理节点）
* node（计算节点）
* image（镜像仓库）

![image-20210426235433909](http://f.lingjiatong.cn:30090/rootelement/articleQuote/image-20210426235433909.png)

## Master节点服务

* Api server
* scheduler
* controller
* etcd

![image-20210426235749370](http://f.lingjiatong.cn:30090/rootelement/articleQuote/image-20210426235749370.png)

### API Server

是整个系统的对外接口，供客户端和其他组件调用，相当于”营业厅“

### Scheduler

负责对集群内部的资源进行调度，相当于”调度室“

### Controller manager

负责管理控制器，相当于”大总管“

### etcd

* 定义

  etcd是CoreOS团队于2013年6月发起的开源项目，它的目标是构建一个高可用的分布式键值（key-value）数据库，基于Go语言实现。**在分布式系统中，各种服务的配置信息的管理分享，服务的发现是一个很基本同时也是很重要的问题**。CoreOS项目就希望基于etcd来解决这一问题

* etcd

  k8s使用etcd来存储网络配置，解决容器互联互通的问题

## Node节点服务

* docker

  容器管理

* kubelet

  主要负责监视指派到它所在的Pod，包括创建、修改、监控、删除等

* kube-proxy

  主要负责为Pd对象提供代理

* 其他附加服务

![image-20210427000220359](http://f.lingjiatong.cn:30090/rootelement/articleQuote/image-20210427000220359.png)



## 实验用到的机器

* 机器列表

  | 主机名             | IP地址         | 角色        | 备注     |
  | ------------------ | -------------- | ----------- | -------- |
  | Centos7_k8s_master | 192.168.137.58 | kube-master | 管理节点 |
  | Centos7_k8s_node1  | 192.168.137.59 | Kube-node1  | 计算节点 |
  | Centos7_k8s_node2  | 192.168.137.60 | Kube-node2  | 计算节点 |

